# .ralphrc - Ralph project configuration
# Generated by: ralph enable
# Documentation: https://github.com/frankbria/ralph-claude-code
#
# This file configures Ralph's behavior for this specific project.
# Values here override global Ralph defaults.
# Environment variables override values in this file.

# =============================================================================
# PROJECT IDENTIFICATION
# =============================================================================

# Project name (used in prompts and logging)
PROJECT_NAME="${PROJECT_NAME:-my-project}"

# Project type: javascript, typescript, python, rust, go, unknown
PROJECT_TYPE="${PROJECT_TYPE:-unknown}"

# =============================================================================
# LOOP SETTINGS
# =============================================================================

# Maximum API calls per hour (rate limiting)
MAX_CALLS_PER_HOUR=100

# Timeout for each Claude Code invocation (in minutes)
# When timeout is reached, the loop logs the event and continues to the next iteration
CLAUDE_TIMEOUT_MINUTES=15

# Output format: json (structured) or text (legacy)
CLAUDE_OUTPUT_FORMAT="json"

# =============================================================================
# TOOL PERMISSIONS
# =============================================================================

# Comma-separated list of allowed tools for Claude
# Common tools: Write, Read, Edit, Grep, Glob
# Bash patterns: Bash(git add *), Bash(git commit *), Bash(npm *), Bash(pytest)
# NOTE: Default uses specific git subcommands for safety. To allow ALL git commands: Bash(git *)
# Dangerous commands excluded by default: git clean, git rm, git reset (can delete .ralph/)
# Safe git subcommands only - broad Bash(git *) allows destructive commands like git clean/git rm (Issue #149)
ALLOWED_TOOLS="Write,Read,Edit,Bash(git add *),Bash(git commit *),Bash(git diff *),Bash(git log *),Bash(git status),Bash(git status *),Bash(git push *),Bash(git pull *),Bash(git fetch *),Bash(git checkout *),Bash(git branch *),Bash(git stash *),Bash(git merge *),Bash(git tag *),Bash(npm *),Bash(pytest)"

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================

# Enable session continuity (maintain context across loops)
SESSION_CONTINUITY=true

# Session expiration time in hours (start fresh after this time)
SESSION_EXPIRY_HOURS=24

# =============================================================================
# TASK SOURCES
# =============================================================================

# Where to import tasks from (comma-separated)
# Options: local, beads, github
TASK_SOURCES="local"

# GitHub label for task filtering (when github is in TASK_SOURCES)
GITHUB_TASK_LABEL="ralph-task"

# Beads filter for task import (when beads is in TASK_SOURCES)
BEADS_FILTER="status:open"

# =============================================================================
# CIRCUIT BREAKER THRESHOLDS
# =============================================================================

# Open circuit after N loops with no file changes
CB_NO_PROGRESS_THRESHOLD=3

# Open circuit after N loops with the same error
CB_SAME_ERROR_THRESHOLD=5

# Open circuit if output declines by more than N percent
CB_OUTPUT_DECLINE_THRESHOLD=70

# Auto-recovery: cooldown before retry (minutes, 0 = immediate)
CB_COOLDOWN_MINUTES=30

# Auto-reset circuit breaker on startup (bypasses cooldown)
# WARNING: Reduces circuit breaker safety for unattended operation
CB_AUTO_RESET=false

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Minimum Claude CLI version required
CLAUDE_MIN_VERSION="2.0.76"

# Enable verbose logging
RALPH_VERBOSE=false

# Custom prompt file (relative to .ralph/)
# PROMPT_FILE="PROMPT.md"

# Custom fix plan file (relative to .ralph/)
# FIX_PLAN_FILE="@fix_plan.md"

# Custom agent file (relative to .ralph/)
# AGENT_FILE="@AGENT.md"
